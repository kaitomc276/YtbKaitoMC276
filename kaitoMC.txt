-- Script Blox Fruits hoàn chỉnh by KaitoMC276 - Đừng xóa credit
repeat wait() until game:IsLoaded()

-- Thông báo khi chạy script
game.StarterGui:SetCore("SendNotification", {
	Title = "Script Blox Fruits";
	Text = "Nhớ đăng kí kênh và ủng hộ tác giả KaitoMC276 nhé!";
	Duration = 10;
})

-- Auto nhập code x2 EXP
spawn(function()
	local codes = {
		"EXP_5B", "kittgaming", "Sub2Fer999", "Enyu_is_Pro",
		"Magicbus", "JCWK", "Starcodeheo", "Bluxxy",
		"fudd10_v2", "fudd10", "SUB2GAMERROBOT_EXP1",
		"Sub2OfficialNoobie", "TheGreatAce", "Axiore",
		"TantaiGaming", "StrawHatMaine", "Sub2NoobMaster123"
	}
	for _, v in pairs(codes) do
		pcall(function()
			game:GetService("ReplicatedStorage").Remotes.RedeemCode:InvokeServer(v)
		end)
		wait(1)
	end
end)

-- Auto mua Haki
spawn(function()
	while wait(5) do
		pcall(function()
			if not game.Players.LocalPlayer.Character:FindFirstChild("HasBuso") then
				game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyHaki", "Buso")
			end
			if not game.Players.LocalPlayer.Character:FindFirstChild("EnhancedArmament") then
				game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyHaki", "Enhancement")
			end
		end)
	end
end)

-- Auto nâng điểm
spawn(function()
	while wait(2) do
		pcall(function()
			local points = game.Players.LocalPlayer.Data.Points
			if points.Value > 0 then
				game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("AddPoint", "Melee", points.Value)
			end
		end)
	end
end)

-- Auto nhặt trái và cất vào kho
spawn(function()
	while wait(3) do
		for _, item in pairs(workspace:GetChildren()) do
			if item:IsA("Tool") and item:FindFirstChild("Handle") then
				game.Players.LocalPlayer.Character.Humanoid:EquipTool(item)
				wait(1)
				game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("StoreFruit", item.Name)
			end
		end
	end
end)

-- Auto random trái
spawn(function()
	while wait(300) do
		pcall(function()
			game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("Cousin", "Buy")
		end)
	end
end)

-- Auto chuyển Sea 2/Sea 3
spawn(function()
	while wait(10) do
		local level = game.Players.LocalPlayer.Data.Level.Value
		if level >= 700 and game.PlaceId == 2753915549 then
			game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("TravelDressrosa")
		elseif level >= 1500 and game.PlaceId == 4442272183 then
			game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("TravelZou")
		end
	end
end)

-- Auto mua tam kiếm huyền thoại
spawn(function()
	while wait(30) do
		pcall(function()
			game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyItem", "Triple Katana")
		end)
	end
end)

-- Auto lấy Yama Sea 3
spawn(function()
	while wait(20) do
		pcall(function()
			if game.PlaceId == 7449423635 then
				game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("GetYama")
			end
		end)
	end
end)

-- Danh sách boss theo level
local bosses = {
	{ name = "Mob Leader" },
	{ name = "Vice Admiral" },
	{ name = "Warden" },
	{ name = "Chief Warden" },
	{ name = "Swan" },
	{ name = "Magma Admiral" },
	{ name = "Ice Admiral" },
	{ name = "Smoke Admiral" },
	{ name = "Don Swan" },
	{ name = "Cursed Captain" },
	{ name = "Stone" },
	{ name = "Island Empress" },
	{ name = "Kilo Admiral" },
	{ name = "Captain Elephant" },
	{ name = "Beautiful Pirate" },
	{ name = "Longma" },
	{ name = "rip_indra" },
	{ name = "Cake Queen" },
	{ name = "Order" },
	{ name = "Great Tree" },
	{ name = "King Samurai" },
	{ name = "Sea King" },
	{ name = "Giant Islander" },
	{ name = "Monkey King" },
}

-- Đánh boss khi cùng level
spawn(function()
	while wait(1) do
		for _, boss in pairs(bosses) do
			for _, v in pairs(workspace.Enemies:GetChildren()) do
				if v.Name == boss.name and v:FindFirstChild("HumanoidRootPart") and v.Humanoid.Health > 0 then
					local plvl = game.Players.LocalPlayer.Data.Level.Value
					if v:FindFirstChild("Level") and plvl >= v.Level.Value then
						game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("AbandonQuest")
						game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0, 25, 0)
						repeat
							game:GetService("VirtualInputManager"):SendMouseButtonEvent(0, 0, 0, true, game, 0)
							wait(0.03)
							game:GetService("VirtualInputManager"):SendMouseButtonEvent(0, 0, 0, false, game, 0)
							wait(0.03)
						until not v.Parent or v.Humanoid.Health <= 0
					end
				end
			end
		end
	end
end)

-- Farm level thường khi không có boss
local function getQuestInfo()
	local lvl = game.Players.LocalPlayer.Data.Level.Value
	if lvl <= 10 then
		return "BanditQuest1", "Bandit", Vector3.new(1060, 16, 1547), 1
	elseif lvl <= 30 then
		return "BuggyQuest1", "Pirate", Vector3.new(-1125, 14, 3938), 1
	elseif lvl <= 60 then
		return "BuggyQuest1", "Brute", Vector3.new(-1199, 25, 4285), 2
	elseif lvl >= 2450 then
		return "AmazonQuest", "Island Empress", Vector3.new(5444, 752, -289), 2
	end
end

spawn(function()
	while wait(2) do
		local bossStillAlive = false
		for _, boss in pairs(bosses) do
			for _, v in pairs(workspace.Enemies:GetChildren()) do
				if v.Name == boss.name and v:FindFirstChild("HumanoidRootPart") and v.Humanoid.Health > 0 then
					bossStillAlive = true
					break
				end
			end
		end
		if not bossStillAlive then
			local qname, enemy, pos, qid = getQuestInfo()
			if qname then
				pcall(function()
					game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("Quest", "Begin", qname, qid)
					wait(1)
					local hrp = game.Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
					hrp.CFrame = CFrame.new(pos)
					wait(1)
					for _, mob in pairs(workspace.Enemies:GetChildren()) do
						if mob.Name == enemy and mob:FindFirstChild("HumanoidRootPart") and mob.Humanoid.Health > 0 then
							repeat
								local char = game.Players.LocalPlayer.Character
								if char and mob:FindFirstChild("HumanoidRootPart") then
									char.HumanoidRootPart.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0, 25, 0)
									for _ = 1, 3 do
										game:GetService("VirtualInputManager"):SendMouseButtonEvent(0, 0, 0, true, game, 0)
										wait(0.03)
										game:GetService("VirtualInputManager"):SendMouseButtonEvent(0, 0, 0, false, game, 0)
										wait(0.03)
									end
								end
							until mob.Humanoid.Health <= 0 or not mob.Parent
						end
					end
				end)
			end
		end
	end
end)
